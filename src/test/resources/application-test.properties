# Test Configuration
spring.application.name=application-test

# Server Configuration
server.port=0
server.servlet.context-path=/api

# SQL Server Local Database for Testing
# Usando las mismas credenciales que producción pero con URL local
spring.datasource.url=jdbc:sqlserver://localhost:1433;database=numerino_test;encrypt=false;trustServerCertificate=true;
spring.datasource.username=numerino_admin
spring.datasource.password=MerinoNoSeBana1510
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA Configuration for Tests (mismo que producción)
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# Configuración para permitir que la aplicación funcione sin base de datos si es necesario
spring.datasource.hikari.initialization-fail-timeout=-1
spring.sql.init.continue-on-error=true
spring.jpa.properties.hibernate.connection.autocommit=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# JWT Configuration (usando claves de test)
jwt.secret=test-256-bit-secret-key-for-jwt-signatures-should-be-very-long-for-testing-purposes
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# Enable SQL init for tests using the REAL data.sql file from production
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true
spring.sql.init.data-locations=classpath:data.sql

# Logging Configuration para tests
logging.level.com.gamified.application=INFO
logging.level.org.springframework.jdbc.core=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Test specific configurations
spring.test.database.replace=none
spring.jpa.properties.hibernate.connection.autocommit=true

# Configuración para permitir sobreescritura de beans en casos necesarios
spring.main.allow-bean-definition-overriding=false 